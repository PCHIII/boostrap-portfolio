<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
       
    <link rel="stylesheet" type="text/css" href="assets/css/style.css"> 
    <script src="https://ok1static.oktacdn.com/assets/js/sdk/okta-signin-widget/2.16.0/js/okta-sign-in.min.js" type="text/javascript"></script>
    <!-- <link href="https://ok1static.oktacdn.com/assets/js/sdk/okta-signin-widget/2.16.0/css/okta-sign-in.min.css" type="text/css" rel="stylesheet"/> -->
    <!-- <link href="https://ok1static.oktacdn.com/assets/js/sdk/okta-signin-widget/2.16.0/css/okta-theme.css" type="text/css" rel="stylesheet"/> -->

    <link
    href="https://ok1static.oktacdn.com/assets/js/sdk/okta-signin-widget/3.0.0/css/okta-sign-in.min.css"
    type="text/css"
    rel="stylesheet"/>


    <title>Login</title>
</head>
 <body>
   
    <nav class="navbar sticky-top navbar-expand-lg navbar-dark bg-dark border-bottom fixed-top">
            <div class="container-fluid">
                    <div class="float-left pr-3 slide-in-left2"> <img src="assets/images/avataaars.png"  class="profile-sm" alt="responsive-image"></div> 
                    <a class="navbar-brand slide-in-left">Trey Helmer</a>
                <button class="navbar-toggler float-right" type="button" data-toggle="collapse" data-target="#navbar9">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <div class="navbar-collapse collapse" id="navbar9">
                    <ul class="navbar-nav ml-auto slide-in-right">
                        <li class="nav-item">
                            <a class="nav-link" href="index.html">About Me</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="portfolio.html">Portfolio</a>
                        </li>
                        <!-- <li class="nav-item">
                            <a class="nav-link" href="assets/images/TreyHelmer-resume-2019.pdf" target="_blank">Resume</a>
                        </li> -->
                        <li class="nav-item"> 
                            <a class="nav-link" href="contact.html">Contact</a>
                        </li>

                        <li class="nav-item">
                        <a href="contact.html" class="nav-link text-warning" id="logout-button">Sign out</a>
                      </li>
                    </ul>
                </div>
            </div>
    </nav>
    <div id="messageBox" class="card text-dark bg-warning text-center border-bottom p-1">
     Please Sign In with OKTA Widget.
    </div>
    <div id="okta-login-container"></div>

    <script type="text/javascript">




        var oktaSignIn = new OktaSignIn({

          features: {
          registration: true,                 // Enable self-service registration flow
          router: true, 
          },

       

          baseUrl: "https://dev-970237.okta.com",
          logo: 'assets/images/icons/gt.png',
          brandName: 'Trey Helmer',
          clientId: "0oa24xeu76kpUA5wY357",
          i18n: {
        en: {
          'primaryauth.title': 'Sign in to VIP Lounge',
          'primaryauth.username.placeholder': 'your@email.com',
          'primaryauth.username.tooltip': 'Username must be Email',
        },
      },

          authParams: {
            issuer: "https://dev-970237.okta.com/oauth2/default",
            responseType: ['token', 'id_token'],
            display: 'page',
            scopes: ['openid', 'email', 'profile'],
                      
          },

            colors: {
            brand: '#495057',
          }

        });
  
        if (oktaSignIn.token.hasTokensInUrl()) {
          oktaSignIn.token.parseTokensFromUrl(
            // If we get here, the user just logged in.
            function success(res) {
              var accessToken = res[0];
              var idToken = res[1];
  
              oktaSignIn.tokenManager.add('accessToken', accessToken);
              oktaSignIn.tokenManager.add('idToken', idToken);
  
              window.location.hash='';
              document.getElementById("messageBox").innerHTML = "Hello, " + idToken.claims.email + "! You just logged in! :)";
            },
            function error(err) {
              console.error(err);
            }
          );
        } else {
          oktaSignIn.session.get(function (res) {
            // If we get here, the user is already signed in.
            if (res.status === 'ACTIVE') {
              document.getElementById("messageBox").innerHTML = "Hello, " + res.login + "! You're 'still' logged in! :)";
              return;
            }
            oktaSignIn.renderEl(
              { el: '#okta-login-container' },
              function success(res) {},
              function error(err) {
                console.error(err);
              }
            );
          });
        }

        document.getElementById('logout-button').addEventListener('click', (event) => {
    event.preventDefault()

    const signoutWindow = window.open(
      'https://dev-970237.okta.com/login/signout',
      'okta-signout',
      'height=1,width=1',
    )

    setTimeout(() => {
      signoutWindow.close()
      window.location = document.getElementById('logout-button').href
    }, 1000)
  })
      </script>
    </body>
  </html>


</div>          
    <div class="container-footer fixed-bottom bg-warning text-center border-top">
            &copy; 2019 Trey Helmer</div>

<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
<script src="assets/main.js"></script>
</body>
</html>